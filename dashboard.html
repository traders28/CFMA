<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Car Dealer Dashboard - AutoFleet Manager</title>
  <meta name="description" content="Manage your vehicle inventory, track expenses, and monitor sales with AutoFleet Manager's dashboard.">
  <meta name="keywords" content="AutoFleet Manager, car dealer, vehicle inventory, dashboard">
  <meta name="robots" content="index, follow">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf-autotable.min.js"></script>
</head>
<body>
  <nav class="navbar navbar-dark bg-dark fixed-top">
    <div class="container-fluid">
      <button class="navbar-toggler d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarOffcanvas" aria-controls="sidebarOffcanvas">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="dropdown ms-auto">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="fas fa-user"></i> Profile
        </button>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
          <li><a class="dropdown-item" href="login.html">Login</a></li>
          <li><a class="dropdown-item" href="#">Settings</a></li>
          <li><a class="dropdown-item" href="#">Language</a></li>
          <li><a class="dropdown-item" href="#" id="logout">Logout</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="offcanvas offcanvas-start text-bg-dark d-md-none" tabindex="-1" id="sidebarOffcanvas" aria-labelledby="sidebarOffcanvasLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="sidebarOffcanvasLabel">Dashboard</h5>
      <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body" id="mobileSidebar"></div>
  </div>

  <div class="container-fluid pt-5">
    <div class="row">
      <nav class="col-md-2 sidebar p-3 d-none d-md-block" id="sidebar"></nav>

      <main class="col-md-10 content">
        <!-- Statistic Cards -->
        <div class="row g-3 mb-4">
          <div class="col-md-3 col-6">
            <div class="stat-card bg-primary">
              <h4>Total Vehicles</h4>
              <span>50</span>
            </div>
          </div>
          <div class="col-md-3 col-6">
            <div class="stat-card bg-success">
              <h4>Total Expenses</h4>
              <span>€120,000</span>
            </div>
          </div>
          <div class="col-md-3 col-6">
            <div class="stat-card bg-warning text-dark">
              <h4>Potential Value</h4>
              <span>€200,000</span>
            </div>
          </div>
          <div class="col-md-3 col-6">
            <div class="stat-card bg-danger">
              <h4>Below Min. Price</h4>
              <span>5</span>
            </div>
          </div>
        </div>

        <!-- Filter Buttons & Add -->
        <div class="d-flex flex-wrap justify-content-between align-items-center mb-4">
          <div class="filter-btns">
            <button class="btn btn-dark">All</button>
            <button class="btn btn-outline-secondary">In Service</button>
            <button class="btn btn-outline-secondary">In Preparation</button>
            <button class="btn btn-outline-secondary">Listed</button>
            <button class="btn btn-outline-secondary">Awaiting Payment</button>
          </div>
          <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addVehicleModal"><i class="fas fa-plus"></i> Add Vehicle</button>
          <a href="invoice.html" class="btn btn-info">Issue Invoice</a>
        </div>

        <div class="row mb-4">
          <div class="col">
            <h2>Vehicle Overview</h2>
          </div>
        </div>

        <div class="row">
          <div class="col-md-8">
            <div class="card">
              <div class="card-header">Inventory Status</div>
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table table-hover" id="inventoryTable">
                    <thead>
                      <tr>
                        <th>Image</th>
                        <th>Car</th>
                        <th>Purchase</th>
                        <th>Expenses</th>
                        <th>Min Price</th>
                        <th>Target Price</th>
                        <th>Status</th>
                        <th>Progress</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr data-car="audi" data-brand="Audi" data-model="A4" data-year="2020" data-fuel="Diesel" data-vin="123" data-reg="AB123" data-price="7500">
                        <td><img src="https://upload.wikimedia.org/wikipedia/commons/3/35/Audi_A4_B9_sedans_%28FL%29_1X7A2441.jpg" alt="Audi A4"></td>
                        <td>Audi A4</td>
                        <td>€6,000</td>
                        <td>€400</td>
                        <td>€6,800</td>
                        <td>€7,500</td>
                        <td><span class="badge bg-warning">In Preparation</span></td>
                        <td>
                          <div class="progress">
                            <div class="progress-bar bg-warning" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                          </div>
                          <small>In Service &rarr; Cleaning &rarr; Prep</small>
                        </td>
                      </tr>
                      <tr data-car="bmw" data-brand="BMW" data-model="3 Series" data-year="2019" data-fuel="Gasoline" data-vin="456" data-reg="CD456" data-price="8800">
                        <td><img src="https://upload.wikimedia.org/wikipedia/commons/9/91/BMW_G20_%282022%29_IMG_7316_%282%29.jpg" alt="BMW 3 Series"></td>
                        <td>BMW 3 Series</td>
                        <td>€7,200</td>
                        <td>€600</td>
                        <td>€8,000</td>
                        <td>€8,800</td>
                        <td><span class="badge bg-success">Listed</span></td>
                        <td>
                          <div class="progress">
                            <div class="progress-bar bg-success" role="progressbar" style="width: 80%" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>
                          </div>
                          <small>In Service &rarr; Cleaning &rarr; Listed</small>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <div class="col-md-4">
            <div class="card">
              <div class="card-header">Progress Timeline</div>
              <div class="card-body timeline" id="timeline-content">
                <p>Select a vehicle to view timeline.</p>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- Add Vehicle Modal -->
  <div class="modal fade" id="addVehicleModal" tabindex="-1" aria-labelledby="addVehicleLabel" aria-hidden="true" data-bs-backdrop="static">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addVehicleLabel">Add New Vehicle</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
          <form id="addForm">
            <div class="mb-3">
              <label for="type" class="form-label">Type*</label>
              <select class="form-select" id="type" required>
                <option>Car</option>
                <option>Motorcycle</option>
                <option>Bus</option>
                <option>Truck</option>
                <option>Trailer</option>
                <option>Platform</option>
                <option>Caravan</option>
                <option>Camper</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="brand" class="form-label">Brand*</label>
              <select class="form-select" id="brand" required>
                <option>Abarth</option>
                <option>Acura</option>
                <option>Alfa Romeo</option>
                <option>Alpine</option>
                <option>Ariel</option>
                <option>Aston Martin</option>
                <option>Audi</option>
                <option>Bentley</option>
                <option>BMW</option>
                <option>Bugatti</option>
                <option>Buick</option>
                <option>Cadillac</option>
                <option>Caterham</option>
                <option>Chevrolet</option>
                <option>Chrysler</option>
                <option>Citroen</option>
                <option>Dacia</option>
                <option>Daewoo</option>
                <option>Daihatsu</option>
                <option>Dodge</option>
                <option>Ferrari</option>
                <option>Fiat</option>
                <option>Fisker</option>
                <option>Ford</option>
                <option>Genesis</option>
                <option>GMC</option>
                <option>Honda</option>
                <option>Hummer</option>
                <option>Hyundai</option>
                <option>Infiniti</option>
                <option>Isuzu</option>
                <option>Jaguar</option>
                <option>Jeep</option>
                <option>Kia</option>
                <option>Koenigsegg</option>
                <option>Lamborghini</option>
                <option>Lancia</option>
                <option>Land Rover</option>
                <option>Lexus</option>
                <option>Lincoln</option>
                <option>Lotus</option>
                <option>Mahindra</option>
                <option>Maserati</option>
                <option>Maybach</option>
                <option>Mazda</option>
                <option>McLaren</option>
                <option>Mercedes-Benz</option>
                <option>Mercury</option>
                <option>MG</option>
                <option>Mini</option>
                <option>Mitsubishi</option>
                <option>Nissan</option>
                <option>Opel</option>
                <option>Pagani</option>
                <option>Peugeot</option>
                <option>Pontiac</option>
                <option>Porsche</option>
                <option>RAM</option>
                <option>Renault</option>
                <option>Rivian</option>
                <option>Rolls-Royce</option>
                <option>Saab</option>
                <option>Saturn</option>
                <option>Scion</option>
                <option>Seat</option>
                <option>Skoda</option>
                <option>Smart</option>
                <option>Subaru</option>
                <option>Suzuki</option>
                <option>Tesla</option>
                <option>Toyota</option>
                <option>Volkswagen</option>
                <option>Volvo</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="model" class="form-label">Model*</label>
              <select class="form-select" id="model" required></select>
            </div>
            <div class="mb-3">
              <label for="regPlate" class="form-label">Reg Plate <i class="fas fa-camera" id="scanPlate" style="cursor:pointer;"></i></label>
              <input type="text" class="form-control" id="regPlate">
              <input type="file" id="plateInput" accept="image/*" capture="environment" style="display:none;">
            </div>
            <div class="mb-3">
              <label for="mileage" class="form-label">Mileage* (km)</label>
              <input type="number" class="form-control" id="mileage" required>
            </div>
            <div class="mb-3">
              <label for="fuel" class="form-label">Fuel*</label>
              <select class="form-select" id="fuel" required>
                <option>Gasoline</option>
                <option>Diesel</option>
                <option>Electric</option>
                <option>Hybrid</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="color" class="form-label">Color*</label>
              <input type="text" class="form-control" id="color" required>
            </div>
            <div class="mb-3">
              <label for="moreInfo" class="form-label">More Information*</label>
              <textarea class="form-control" id="moreInfo" required></textarea>
            </div>
            <div class="mb-3">
              <label for="variant" class="form-label">Variant*</label>
              <input type="text" class="form-control" id="variant" required>
            </div>
            <div class="mb-3">
              <label for="engine" class="form-label">Engine*</label>
              <input type="text" class="form-control" id="engine" required>
            </div>
            <div class="mb-3">
              <label for="vin" class="form-label">VIN*</label>
              <input type="text" class="form-control" id="vin" required>
            </div>
            <div class="mb-3">
              <label for="firstRegistration" class="form-label">First Registration*</label>
              <input type="date" class="form-control" id="firstRegistration" required>
            </div>
            <div class="mb-3">
              <label for="purchaseDate" class="form-label">Purchase Date*</label>
              <input type="date" class="form-control" id="purchaseDate" required>
            </div>
            <div class="mb-3">
              <label for="purchasedPrice" class="form-label">Purchased Price (USD)* <i class="fas fa-upload" id="uploadDocument" style="cursor:pointer;"></i></label>
              <input type="number" class="form-control" id="purchasedPrice" required>
              <input type="file" id="documentInput" accept="image/*,application/pdf" style="display:none;">
            </div>
            <div class="mb-3 form-check">
              <input type="checkbox" class="form-check-input" id="hasWarranty">
              <label class="form-check-label" for="hasWarranty">Has Warranty</label>
            </div>
            <div class="mb-3">
              <label for="notes" class="form-label">Notes*</label>
              <textarea class="form-control" id="notes" required></textarea>
            </div>
            <div class="mb-3">
              <label class="form-label">Images <button type="button" class="btn btn-secondary btn-sm" id="recognizeCar">Recognize Car</button></label>
              <button type="button" class="btn btn-secondary" id="uploadImages">Upload Images</button>
              <div id="preview-container" class="mt-2"></div>
              <input type="file" id="imageInput" accept="image/*" multiple style="display:none;">
              <input type="file" id="cameraInput" accept="image/*" capture="environment" multiple style="display:none;">
              <input type="file" id="carImageInput" accept="image/*" capture="environment" style="display:none;">
            </div>
            <div class="mb-3">
              <label for="video" class="form-label">Video</label>
              <input type="file" class="form-control" id="video" accept="video/*">
              <video id="video-preview" controls style="display:none; max-width:200px;"></video>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id="saveVehicle">Save Vehicle</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script type="module" src="js/firebase-init.js"></script>
  <script type="module" src="js/dashboard.js"></script>
</body>
</html>